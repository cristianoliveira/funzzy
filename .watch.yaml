## Funzzy events file
# more details see: https://github.com/cristianoliveira/funzzy
#
# list here all the events and the commands that it should execute
#
- name: run my test (tag:quick)
  run: 
    - "cargo test --verbose"
    # - 'cargo test it_returns_an_error_when_fail_to_load_config_file -- --nocapture'
  change: "src/**"
  run_on_init: true

- name: run my lint (tag:quick)
  run: "make lint"
  change: "src/**"

- name: run formatter (tag:quick)
  run: "cargo fmt -- {{filepath}}"
  change: "src/**"
  ignore: "src/**/*log*"

- name: run new-integration (tag:quick)
  run: 
    - "cargo test --test '*' -- --nocapture"
    # - "cargo test --test 'test_it_watch_files_and_execute_configured_commands' -- --nocapture"
    # - "cargo test 'test_it_watch_files_and_execute_configured_commands' -- --nocapture"
  change: 
    - "tests/**/*.rs"
    - "examples/*.yaml"
    - "examples/*.yml"
  ignore: "examples/workdir/ignored/**"
  run_on_init: true

- name: run integration
  run: "make testpath={{filepath}} integration"
  change: "tests/integration/**/*.sh"
  ignore: [
    "tests/integration/workdir/**",
    "tests/integration/release/**",
    "tests/integration/debug/**",
    "tests/integration/*log*",
    "tests/integration/funzzy",
  ]

- name: run my build
  run: "make build"
  change: ["Cargo.*"]
